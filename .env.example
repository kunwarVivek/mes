# ============================================================================
# Unison Manufacturing ERP - Environment Configuration
# ============================================================================
# Version: 2.0 (PostgreSQL-Native Architecture)
# Copy this file to .env and update with your values
# ============================================================================

# ============================================================================
# PostgreSQL Database
# ============================================================================
POSTGRES_PASSWORD=change_this_in_production
POSTGRES_USER=unison
POSTGRES_DB=unison_erp
DATABASE_URL=postgresql://unison:change_this_in_production@postgres:5432/unison_erp

# ============================================================================
# Application Security
# ============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=change-this-to-a-random-secret-key-min-32-chars-long
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# CORS Settings
# ============================================================================
# Development: Allow localhost ports
BACKEND_CORS_ORIGINS=["http://localhost:3000","http://localhost:5173","http://localhost:8000"]

# Production: Replace with your domains
# BACKEND_CORS_ORIGINS=["https://app.yourdomain.com","https://yourdomain.com"]

# ============================================================================
# MinIO Object Storage (S3-Compatible)
# ============================================================================
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_ENDPOINT=minio:9000
MINIO_BUCKET=unison-files
MINIO_SECURE=false

# Production: Use strong credentials
# MINIO_ACCESS_KEY=your_access_key_20_chars_min
# MINIO_SECRET_KEY=your_secret_key_40_chars_min
# MINIO_SECURE=true

# ============================================================================
# SAP Integration (Optional)
# ============================================================================
# Leave empty if not using SAP integration
SAP_BASE_URL=
SAP_USERNAME=
SAP_PASSWORD=
SAP_CLIENT=100

# Production example:
# SAP_BASE_URL=https://sap.yourcompany.com/sap/opu/odata/sap
# SAP_USERNAME=integration_user
# SAP_PASSWORD=your_sap_password
# SAP_CLIENT=100

# ============================================================================
# Email Configuration (Optional)
# ============================================================================
# For email notifications (NCR approvals, inventory alerts, etc.)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=Unison MES

# ============================================================================
# pgAdmin (Development Only)
# ============================================================================
PGADMIN_EMAIL=admin@unison.com
PGADMIN_PASSWORD=admin

# Production: Use strong credentials
# PGADMIN_EMAIL=admin@yourcompany.com
# PGADMIN_PASSWORD=strong_password_here

# ============================================================================
# Environment
# ============================================================================
ENVIRONMENT=development  # development | staging | production

# ============================================================================
# PGMQ Worker Configuration
# ============================================================================
QUEUE_NAME=background_jobs
WORKER_CONCURRENCY=5

# ============================================================================
# Frontend Configuration
# ============================================================================
VITE_API_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000/ws
VITE_MINIO_URL=http://localhost:9000

# Production example:
# VITE_API_URL=https://api.yourdomain.com
# VITE_WS_URL=wss://api.yourdomain.com/ws
# VITE_MINIO_URL=https://files.yourdomain.com

# ============================================================================
# Logging & Monitoring (Optional)
# ============================================================================
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL
SENTRY_DSN=  # Sentry error tracking (optional)

# ============================================================================
# PostgreSQL Extension Configuration (Advanced)
# ============================================================================
# These are set in docker-compose.yml command, override if needed

# pg_cron: Scheduled tasks database
# CRON_DATABASE_NAME=unison_erp

# PostgreSQL Performance Tuning
# SHARED_BUFFERS=4GB
# EFFECTIVE_CACHE_SIZE=12GB
# MAINTENANCE_WORK_MEM=1GB
# MAX_WORKER_PROCESSES=8

# ============================================================================
# Production Deployment Notes
# ============================================================================
# 1. Change all default passwords (POSTGRES_PASSWORD, SECRET_KEY, MINIO credentials)
# 2. Use strong random keys (generate with: openssl rand -base64 32)
# 3. Update BACKEND_CORS_ORIGINS with your production domains
# 4. Set ENVIRONMENT=production
# 5. Enable HTTPS (MINIO_SECURE=true)
# 6. Configure proper SMTP settings for email notifications
# 7. Set up Sentry for error tracking (optional)
# 8. Review PostgreSQL tuning parameters for your hardware

# ============================================================================
# Container Resource Limits (Production)
# ============================================================================
# Recommended minimum for production:
# - Postgres: 4 CPUs, 8GB RAM, 100GB SSD
# - Backend: 2 CPUs, 2GB RAM
# - PGMQ Worker: 1 CPU, 1GB RAM
# - Frontend: 1 CPU, 512MB RAM
# - MinIO: 1 CPU, 1GB RAM, 500GB HDD

# Scale up based on:
# - Number of concurrent users (100-500 users: above specs)
# - Database size (add 10GB RAM per 100GB data)
# - Background job volume (add workers if queue backlogs)
